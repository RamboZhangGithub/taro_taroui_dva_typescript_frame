{"version":3,"file":"shared.esm.js","sources":["../src/is.ts","../src/components.ts","../src/utils.ts","../src/template.ts","../src/native-apis.ts"],"sourcesContent":["export function isString (o: unknown): o is string {\n  return typeof o === 'string'\n}\n\nexport function isUndefined (o: unknown): o is undefined {\n  return typeof o === 'undefined'\n}\n\nexport function isNull (o: unknown): o is null {\n  return o === null\n}\n\nexport function isObject<T> (o: unknown): o is T {\n  return o !== null && typeof o === 'object'\n}\n\nexport function isBoolean (o: unknown): o is boolean {\n  return o === true || o === false\n}\n\nexport function isFunction (o: unknown): o is (...args: any[]) => any {\n  return typeof o === 'function'\n}\n\nexport function isNumber (o: unknown): o is number {\n  return typeof o === 'number'\n}\n\nexport function isBooleanStringLiteral (o: unknown): o is string {\n  return o === 'true' || o === 'false'\n}\n\nexport const isArray = Array.isArray\n","import { Shortcuts } from './shortcuts'\n\nexport const styles = {\n  style: `i.${Shortcuts.Style}`,\n  class: `i.${Shortcuts.Class}`\n}\n\nexport const events = {\n  bindtap: 'eh'\n}\n\nexport const touchEvents = {\n  bindTouchStart: '',\n  bindTouchMove: '',\n  bindTouchEnd: '',\n  bindTouchCancel: '',\n  bindLongTap: ''\n}\n\nexport const animationEvents = {\n  bindAnimationStart: '',\n  bindAnimationIteration: '',\n  bindAnimationEnd: '',\n  bindTransitionEnd: ''\n}\n\nexport const specialEvents = new Set([\n  'htouchmove',\n  'vtouchmove'\n])\n\nexport function singleQuote (s: string) {\n  return `'${s}'`\n}\n\nconst View = {\n  'hover-class': singleQuote('none'),\n  'hover-stop-propagation': 'false',\n  'hover-start-time': '50',\n  'hover-stay-time': '400',\n  animation: '',\n  ...touchEvents,\n  ...animationEvents\n}\n\nconst Icon = {\n  type: '',\n  size: '23',\n  color: ''\n}\n\nconst MapComp = {\n  longitude: '',\n  latitude: '',\n  scale: '16',\n  markers: '[]',\n  covers: '',\n  polyline: '[]',\n  circles: '[]',\n  controls: '[]',\n  'include-points': '[]',\n  'show-location': '',\n  'layer-style': '1',\n  bindMarkerTap: '',\n  bindControlTap: '',\n  bindCalloutTap: '',\n  bindUpdated: '',\n  ...touchEvents\n}\n\nconst Progress = {\n  percent: '',\n  'stroke-width': '6',\n  color: singleQuote('#09BB07'),\n  activeColor: singleQuote('#09BB07'),\n  backgroundColor: singleQuote('#EBEBEB'),\n  active: 'false',\n  'active-mode': singleQuote('backwards'),\n  'show-info': 'false'\n}\n\nconst RichText = {\n  nodes: '[]'\n}\n\nconst Text = {\n  selectable: 'false',\n  space: '',\n  decode: 'false'\n}\n\nconst Button = {\n  size: singleQuote('default'),\n  type: '',\n  plain: 'false',\n  disabled: '',\n  loading: 'false',\n  'form-type': '',\n  'open-type': '',\n  'hover-class': singleQuote('button-hover'),\n  'hover-stop-propagation': 'false',\n  'hover-start-time': '20',\n  'hover-stay-time': '70',\n  name: ''\n}\n\nconst Checkbox = {\n  value: '',\n  disabled: '',\n  checked: 'false',\n  color: singleQuote('#09BB07'),\n  name: ''\n}\n\nconst CheckboxGroup = {\n  bindChange: '',\n  name: ''\n}\n\nconst Form = {\n  'report-submit': 'false',\n  bindSubmit: '',\n  bindReset: '',\n  name: ''\n}\n\nconst Input = {\n  value: '',\n  type: singleQuote(''),\n  password: 'false',\n  placeholder: '',\n  'placeholder-style': '',\n  'placeholder-class': singleQuote('input-placeholder'),\n  disabled: '',\n  maxlength: '140',\n  'cursor-spacing': '0',\n  focus: 'false',\n  'confirm-type': singleQuote('done'),\n  'confirm-hold': 'false',\n  cursor: 'i.value.length',\n  'selection-start': '-1',\n  'selection-end': '-1',\n  bindInput: '',\n  bindFocus: '',\n  bindBlur: '',\n  bindConfirm: '',\n  name: ''\n}\n\nconst Label = {\n  for: '',\n  name: ''\n}\n\nconst Picker = {\n  mode: singleQuote('selector'),\n  disabled: '',\n  range: '',\n  'range-key': '',\n  value: '',\n  start: '',\n  end: '',\n  fields: singleQuote('day'),\n  'custom-item': '',\n  name: '',\n  bindCancel: '',\n  bindChange: '',\n  bindColumnChange: ''\n}\n\nconst PickerView = {\n  value: '',\n  'indicator-style': '',\n  'indicator-class': '',\n  'mask-style': '',\n  'mask-class': '',\n  bindChange: '',\n  name: ''\n}\n\nconst PickerViewColumn = {\n  name: ''\n}\n\nconst Radio = {\n  value: '',\n  checked: 'false',\n  disabled: '',\n  color: singleQuote('#09BB07'),\n  name: ''\n}\n\nconst RadioGroup = {\n  bindChange: '',\n  name: ''\n}\n\nconst Slider = {\n  min: '0',\n  max: '100',\n  step: '1',\n  disabled: '',\n  value: '0',\n  activeColor: singleQuote('#1aad19'),\n  backgroundColor: singleQuote('#e9e9e9'),\n  'block-size': '28',\n  'block-color': singleQuote('#ffffff'),\n  'show-value': 'false',\n  bindChange: '',\n  bindChanging: '',\n  name: ''\n}\n\nconst Switch = {\n  checked: 'false',\n  disabled: '',\n  type: singleQuote('switch'),\n  color: singleQuote('#04BE02'),\n  bindChange: '',\n  name: ''\n}\n\nconst Textarea = {\n  value: '',\n  placeholder: '',\n  'placeholder-style': '',\n  'placeholder-class': singleQuote('textarea-placeholder'),\n  disabled: '',\n  maxlength: '140',\n  'auto-focus': 'false',\n  focus: 'false',\n  'auto-height': 'false',\n  fixed: 'false',\n  'cursor-spacing': '0',\n  cursor: '-1',\n  'selection-start': '-1',\n  'selection-end': '-1',\n  bindFocus: '',\n  bindBlur: '',\n  bindLineChange: '',\n  bindInput: '',\n  bindConfirm: '',\n  name: ''\n}\n\nconst CoverImage = {\n  src: '',\n  bindLoad: 'eh',\n  bindError: 'eh'\n}\n\nconst CoverView = {\n  'scroll-top': 'false',\n  ...touchEvents\n}\n\nconst MovableArea = {\n  'scale-area': 'false'\n}\n\nconst MovableView = {\n  direction: 'none',\n  inertia: 'false',\n  'out-of-bounds': 'false',\n  x: '',\n  y: '',\n  damping: '20',\n  friction: '2',\n  disabled: '',\n  scale: 'false',\n  'scale-min': '0.5',\n  'scale-max': '10',\n  'scale-value': '1',\n  animation: 'true',\n  bindChange: '',\n  bindScale: '',\n  htouchmove: '',\n  vtouchmove: '',\n  width: singleQuote('10px'),\n  height: singleQuote('10px'),\n  ...touchEvents,\n  ...animationEvents\n}\n\nconst ScrollView = {\n  'scroll-x': 'false',\n  'scroll-y': 'false',\n  'upper-threshold': '50',\n  'lower-threshold': '50',\n  'scroll-top': '',\n  'scroll-left': '',\n  'scroll-into-view': '',\n  'scroll-with-animation': 'false',\n  'enable-back-to-top': 'false',\n  bindScrollToUpper: '',\n  bindScrollToLower: '',\n  bindScroll: '',\n  ...touchEvents,\n  ...animationEvents\n}\n\nconst Swiper = {\n  'indicator-dots': 'false',\n  'indicator-color': singleQuote('rgba(0, 0, 0, .3)'),\n  'indicator-active-color': singleQuote('#000000'),\n  autoplay: 'false',\n  current: '0',\n  interval: '5000',\n  duration: '500',\n  circular: 'false',\n  vertical: 'false',\n  'previous-margin': '\\'0px\\'',\n  'next-margin': '\\'0px\\'',\n  'display-multiple-items': '1',\n  bindChange: '',\n  bindTransition: '',\n  bindAnimationFinish: '',\n  ...touchEvents\n}\n\nconst SwiperItem = {\n  'item-id': ''\n}\n\nconst Navigator = {\n  url: '',\n  'open-type': singleQuote('navigate'),\n  delta: '1',\n  'hover-class': singleQuote('navigator-hover'),\n  'hover-stop-propagation': 'false',\n  'hover-start-time': '50',\n  'hover-stay-time': '600',\n  bindSuccess: '',\n  bindFail: '',\n  bindComplete: ''\n}\n\nconst Audio = {\n  id: '',\n  src: '',\n  loop: 'false',\n  controls: 'false',\n  poster: '',\n  name: '',\n  author: '',\n  bindError: '',\n  bindPlay: '',\n  bindPause: '',\n  bindTimeUpdate: '',\n  bindEnded: ''\n}\n\nconst Camera = {\n  'device-position': singleQuote('back'),\n  flash: singleQuote('auto'),\n  bindStop: '',\n  bindError: ''\n}\n\nconst Image = {\n  src: '',\n  mode: singleQuote('scaleToFill'),\n  'lazy-load': 'false',\n  bindError: '',\n  bindLoad: '',\n  ...touchEvents\n}\n\nconst LivePlayer = {\n  src: '',\n  autoplay: 'false',\n  muted: 'false',\n  orientation: singleQuote('vertical'),\n  'object-fit': singleQuote('contain'),\n  'background-mute': 'false',\n  'min-cache': '1',\n  'max-cache': '3',\n  animation: '',\n  bindStateChange: '',\n  bindFullScreenChange: '',\n  bindNetStatus: ''\n}\n\nconst Video = {\n  src: '',\n  duration: '',\n  controls: 'true',\n  'danmu-list': '',\n  'danmu-btn': '',\n  'enable-danmu': '',\n  autoplay: 'false',\n  loop: 'false',\n  muted: 'false',\n  'initial-time': '0',\n  'page-gesture': 'false',\n  direction: '',\n  'show-progress': 'true',\n  'show-fullscreen-btn': 'true',\n  'show-play-btn': 'true',\n  'show-center-play-btn': 'true',\n  'enable-progress-gesture': 'true',\n  'object-fit': singleQuote('contain'),\n  poster: '',\n  'show-mute-btn': 'false',\n  animation: '',\n  bindPlay: '',\n  bindPause: '',\n  bindEnded: '',\n  bindTimeUpdate: '',\n  bindFullScreenChange: '',\n  bindWaiting: '',\n  bindError: ''\n}\n\nconst Canvas = {\n  'canvas-id': '',\n  'disable-scroll': 'false',\n  bindError: '',\n  ...touchEvents\n}\n\nconst Ad = {\n  'unit-id': '',\n  'ad-intervals': '',\n  bindLoad: '',\n  bindError: '',\n  bindClose: ''\n}\n\nconst WebView = {\n  src: '',\n  bindMessage: '',\n  bindLoad: '',\n  bindError: ''\n}\n\nconst Block = {}\n\n// For Vue，因为 slot 标签被 vue 占用了\nconst SlotView = {\n  name: ''\n}\n\n// For React\n// Slot 和 SlotView 最终都会编译成 <view slot={{ i.name }} />\n// 因为 <slot name=\"{{ i.name }}\" /> 适用性没有前者高（无法添加类和样式）\n// 不给 View 直接加 slot 属性的原因是性能损耗\nconst Slot = {\n  name: ''\n}\n\nexport const internalComponents: Record<string, Record<string, string>> = {\n  View,\n  Icon,\n  Progress,\n  RichText,\n  Text,\n  Button,\n  Checkbox,\n  CheckboxGroup,\n  Form,\n  Input,\n  Label,\n  Picker,\n  PickerView,\n  PickerViewColumn,\n  Radio,\n  RadioGroup,\n  Slider,\n  Switch,\n  CoverImage,\n  Textarea,\n  CoverView,\n  MovableArea,\n  MovableView,\n  ScrollView,\n  Swiper,\n  SwiperItem,\n  Navigator,\n  Audio,\n  Camera,\n  Image,\n  LivePlayer,\n  Video,\n  Canvas,\n  Ad,\n  WebView,\n  Block,\n  Map: MapComp,\n  Slot,\n  SlotView\n}\n\nexport const controlledComponent = new Set([\n  'input',\n  'checkbox',\n  'picker',\n  'picker-view',\n  'radio',\n  'slider',\n  'switch',\n  'textarea'\n])\n\nexport const focusComponents = new Set([\n  'input',\n  'textarea'\n])\n\nexport const voidElements = new Set([\n  'progress',\n  'icon',\n  'rich-text',\n  'input',\n  'textarea',\n  'slider',\n  'switch',\n  'audio',\n  'ad',\n  'official-account',\n  'open-data',\n  'navigation-bar'\n])\n\nexport const nestElements = new Map([\n  ['view', -1],\n  ['catch-view', -1],\n  ['cover-view', -1],\n  ['static-view', -1],\n  ['pure-view', -1],\n  ['block', -1],\n  ['text', -1],\n  ['static-text', 6],\n  ['slot', 8],\n  ['slot-view', 8],\n  ['label', 6],\n  ['form', 4],\n  ['scroll-view', 4],\n  ['swiper', 4],\n  ['swiper-item', 4]\n])\n","import { internalComponents } from './components'\n\nexport const EMPTY_OBJ: any = {}\n\nexport const EMPTY_ARR = []\n\nexport const noop = (..._: unknown[]) => {}\n\nexport const defaultReconciler = {}\n\n/**\n * Boxed value.\n *\n * @typeparam T Value type.\n */\nexport interface Box<T> {\n  v: T;\n}\n\n/**\n * box creates a boxed value.\n *\n * @typeparam T Value type.\n * @param v Value.\n * @returns Boxed value.\n */\nexport const box = <T>(v: T) => ({ v })\n\n/**\n * box creates a boxed value.\n *\n * @typeparam T Value type.\n * @param b Boxed value.\n * @returns Value.\n */\nexport const unbox = <T>(b: Box<T>) => b.v\n\nexport function toDashed (s: string) {\n  return s.replace(/([a-z0-9])([A-Z])/g, '$1-$2').toLowerCase()\n}\n\nexport function toCamelCase (s: string) {\n  let camel = ''\n  let nextCap = false\n  for (let i = 0; i < s.length; i++) {\n    if (s[i] !== '-') {\n      camel += nextCap ? s[i].toUpperCase() : s[i]\n      nextCap = false\n    } else {\n      nextCap = true\n    }\n  }\n  return camel\n}\n\nexport const toKebabCase = function (string) {\n  return string.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase()\n}\n\nexport function capitalize (s: string) {\n  return s.charAt(0).toUpperCase() + s.slice(1)\n}\n\nconst hasOwnProperty = Object.prototype.hasOwnProperty\n\nexport const hasOwn = (\n  val: Record<any, any>,\n  key: string | symbol\n) => hasOwnProperty.call(val, key)\n\nconst reportIssue = '如有疑问，请提交 issue 至：https://github.com/nervjs/taro/issues'\n\n/**\n * ensure takes a condition and throw a error if the condition fails,\n * like failure::ensure: https://docs.rs/failure/0.1.1/failure/macro.ensure.html\n * @param condition condition.\n * @param msg error message.\n */\nexport function ensure (condition: boolean, msg: string): asserts condition {\n  if (!condition) {\n    throw new Error(msg + '\\n' + reportIssue)\n  }\n}\n\nexport function warn (condition: boolean, msg: string) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (condition) {\n      console.warn(msg)\n    }\n  }\n}\n\nexport function queryToJson (str) {\n  const dec = decodeURIComponent\n  const qp = str.split('&')\n  const ret = {}\n  let name\n  let val\n  for (let i = 0, l = qp.length, item; i < l; ++i) {\n    item = qp[i]\n    if (item.length) {\n      const s = item.indexOf('=')\n      if (s < 0) {\n        name = dec(item)\n        val = ''\n      } else {\n        name = dec(item.slice(0, s))\n        val = dec(item.slice(s + 1))\n      }\n      if (typeof ret[name] === 'string') { // inline'd type check\n        ret[name] = [ret[name]]\n      }\n\n      if (Array.isArray(ret[name])) {\n        ret[name].push(val)\n      } else {\n        ret[name] = val\n      }\n    }\n  }\n  return ret // Object\n}\n\nlet _uniqueId = 1\nconst _loadTime = (new Date()).getTime().toString()\n\nexport function getUniqueKey () {\n  return _loadTime + (_uniqueId++)\n}\n\nconst cacheData = {}\n\nexport function cacheDataSet (key, val) {\n  cacheData[key] = val\n}\n\nexport function cacheDataGet (key, delelteAfterGet?) {\n  const temp = cacheData[key]\n  delelteAfterGet && delete cacheData[key]\n  return temp\n}\n\nexport function cacheDataHas (key) {\n  return key in cacheData\n}\n\nexport function mergeInternalComponents (components) {\n  Object.keys(components).forEach(name => {\n    if (name in internalComponents) {\n      Object.assign(internalComponents[name], components[name])\n    } else {\n      internalComponents[name] = components[name]\n    }\n  })\n}\n\nexport function mergeReconciler (hostConfig) {\n  Object.assign(defaultReconciler, hostConfig)\n}\n\nexport function unsupport (api) {\n  return function () {\n    console.warn(`小程序暂不支持 ${api}`)\n  }\n}\n\nexport function setUniqueKeyToRoute (key: string, obj) {\n  const routerParamsPrivateKey = '__key_'\n  const useDataCacheApis = [\n    'navigateTo',\n    'redirectTo',\n    'reLaunch',\n    'switchTab'\n  ]\n\n  if (useDataCacheApis.indexOf(key) > -1) {\n    const url = obj.url = obj.url || ''\n    const hasMark = url.indexOf('?') > -1\n    const cacheKey = getUniqueKey()\n    obj.url += (hasMark ? '&' : '?') + `${routerParamsPrivateKey}=${cacheKey}`\n  }\n}\n","/**\n * 这里我们需要关心的小程序种类有两类：\n * 1. 模板递归：\n *  - 支持：tmpl0 套 tmpl0\n *  - 不支持：这就使得我们必须生成多级的模板，tmpl0 套 tmpl1，tmpl1 套 tmpl2……\n *           直到超过阈值 N (N = config.miniapp.baseLevel) tmplN 会套组件 comp，组件 comp 重新再套 tmpl0。\n * 2. 小程序脚本语言（wxs, sjs, etc...）：\n *  - 支持：可以在模板使用函数缩减模板大小或提高性能（存疑），例如判断一个值是不是假值（falsy value）。\n *         将来或许会把数据序列化^1 的操作也放到小程序脚本语言里。\n *  - 不支持：使用纯 *xml 语法\n *\n * ^1: packages/taro-runtime/src/hydrate.ts\n*/\n\nimport {\n  internalComponents,\n  focusComponents,\n  voidElements,\n  nestElements,\n  styles,\n  events,\n  specialEvents,\n  singleQuote\n} from './components'\nimport { Shortcuts } from './shortcuts'\nimport { isBooleanStringLiteral, isNumber, isFunction } from './is'\nimport { toCamelCase, toKebabCase, toDashed, hasOwn } from './utils'\n\ninterface Component {\n  nodeName: string;\n  attributes: Attributes;\n}\n\ninterface Components {\n  [key: string]: Record<string, string>;\n}\n\ninterface ComponentConfig {\n  includes: Set<string>\n  exclude: Set<string>\n  thirdPartyComponents: Map<string, Set<string>>\n  includeAll: boolean\n}\n\nexport interface IAdapter {\n  if: string;\n  else: string;\n  elseif: string;\n  for: string;\n  forItem: string;\n  forIndex: string;\n  key: string;\n  xs?: string,\n  type: string;\n}\n\nexport type Attributes = Record<string, string>\n\nconst weixinAdapter: IAdapter = {\n  if: 'wx:if',\n  else: 'wx:else',\n  elseif: 'wx:elif',\n  for: 'wx:for',\n  forItem: 'wx:for-item',\n  forIndex: 'wx:for-index',\n  key: 'wx:key',\n  xs: 'wxs',\n  type: 'weapp'\n}\n\nexport class BaseTemplate {\n  protected exportExpr = 'module.exports ='\n  protected isSupportRecursive: boolean\n  protected supportXS = false\n  protected miniComponents: Components\n  protected modifyCompProps?: (compName: string, target: Record<string, string>) => Record<string, string>\n  protected modifyLoopBody?: (child: string, nodeName: string) => string\n  protected modifyLoopContainer?: (children: string, nodeName: string) => string\n  protected modifyTemplateResult?: (res: string, nodeName: string, level: number, children: string) => string\n\n  public Adapter = weixinAdapter\n  /** 组件列表 */\n  public internalComponents = internalComponents\n  /** 可以 focus 聚焦的组件 */\n  public focusComponents: Set<string> = focusComponents\n  /** 不需要渲染子节点的元素 */\n  public voidElements: Set<string> = voidElements\n  /** 可以递归调用自身的组件 */\n  public nestElements: Map<string, number> = nestElements\n\n  private buildAttribute (attrs: Attributes, nodeName: string): string {\n    return Object.keys(attrs)\n      .map(k => `${k}=\"${k.startsWith('bind') || k.startsWith('on') || k.startsWith('catch') ? attrs[k] : `{${this.getAttrValue(attrs[k], k, nodeName)}}`}\" `)\n      .join('')\n  }\n\n  protected replacePropName (name: string, value: string, _componentName?: string) {\n    if (value === 'eh') return name.toLowerCase()\n    return name\n  }\n\n  protected createMiniComponents (components: Components) {\n    const result: Components = Object.create(null)\n\n    for (const key in components) {\n      if (hasOwn(components, key)) {\n        let component = components[key]\n        const compName = toDashed(key)\n        const newComp: Record<string, string> = Object.create(null)\n\n        if (isFunction(this.modifyCompProps)) {\n          component = this.modifyCompProps(compName, component)\n        }\n\n        for (let prop in component) {\n          if (hasOwn(component, prop)) {\n            let propValue = component[prop]\n            if (prop.startsWith('bind') || specialEvents.has(prop)) {\n              propValue = 'eh'\n            } else if (propValue === '') {\n              propValue = `i.${toCamelCase(prop)}`\n            } else if (isBooleanStringLiteral(propValue) || isNumber(+propValue)) {\n              propValue = this.supportXS\n                ? `xs.b(i.${toCamelCase(prop)},${propValue})`\n                : `i.${toCamelCase(prop)}===undefined?${propValue}:i.${toCamelCase(prop)}`\n            } else {\n              propValue = `i.${toCamelCase(prop)}||${propValue || singleQuote('')}`\n            }\n\n            prop = this.replacePropName(prop, propValue, compName)\n\n            newComp[prop] = propValue\n          }\n        }\n        if (compName !== 'block') {\n          Object.assign(newComp, styles, this.getEvents())\n        }\n\n        if (compName === 'swiper-item') {\n          delete newComp.style\n        }\n\n        if (compName === 'view') {\n          const reg = /^(bind|on)(touchmove|TouchMove)$/\n          const comp = { ...newComp }\n          Object.keys(comp).forEach(originKey => {\n            if (!reg.test(originKey)) return\n\n            const key = originKey.replace(reg, 'catch$2')\n            comp[key] = comp[originKey]\n            delete comp[originKey]\n          })\n\n          result['catch-view'] = comp\n        }\n\n        if (compName === 'view' || compName === 'text' || compName === 'image') {\n          const comp: Record<any, any> = {}\n          Object.keys(newComp).forEach(key => {\n            const value = newComp[key]\n            if (value !== 'eh') comp[key] = value\n          })\n          result[`static-${compName}`] = comp\n          if (compName === 'view') {\n            result['pure-view'] = {\n              style: comp.style,\n              class: comp.class\n            }\n          }\n        }\n\n        if (compName === 'slot' || compName === 'slot-view') {\n          result[compName] = {\n            slot: 'i.name'\n          }\n        } else {\n          result[compName] = newComp\n        }\n      }\n    }\n\n    return result\n  }\n\n  protected buildBaseTemplate () {\n    const Adapter = this.Adapter\n\n    const data = !this.isSupportRecursive && this.supportXS\n      ? `${this.dataKeymap('i:item,l:\\'\\'')}`\n      : this.dataKeymap('i:item')\n\n    return `${this.buildXsTemplate()}\n<template name=\"taro_tmpl\">\n  <block ${Adapter.for}=\"{{root.cn}}\" ${Adapter.key}=\"uid\">\n    <template is=\"tmpl_0_${Shortcuts.Container}\" data=\"{{${data}}}\" />\n  </block>\n</template>\n`\n  }\n\n  protected buildThirdPartyAttr (attrs: Set<string>) {\n    return Array.from(attrs).reduce((str, attr) => {\n      if (attr.startsWith('@')) {\n        // vue2\n        let value = attr.slice(1)\n        if (value.indexOf('-') > -1) {\n          value = `:${value}`\n        }\n        return str + `bind${value}=\"eh\" `\n      } else if (attr.startsWith('bind')) {\n        return str + `${attr}=\"eh\" `\n      } else if (attr.startsWith('on')) {\n        // react, vue3\n        let value = toKebabCase(attr.slice(2))\n        if (value.indexOf('-') > -1) {\n          // 兼容如 vant 某些组件的 bind:a-b 这类属性\n          value = `:${value}`\n        }\n        return str + `bind${value}=\"eh\" `\n      }\n\n      return str + `${attr}=\"{{i.${toCamelCase(attr)}}}\" `\n    }, '')\n  }\n\n  protected buildComponentTemplate (comp: Component, level: number) {\n    return this.focusComponents.has(comp.nodeName)\n      ? this.buildFocusComponentTemplte(comp, level)\n      : this.buildStandardComponentTemplate(comp, level)\n  }\n\n  protected buildFocusComponentTemplte (comp: Component, level: number) {\n    const attrs = { ...comp.attributes }\n    const templateName = this.supportXS\n      ? `xs.c(i, 'tmpl_${level}_')`\n      : `i.focus ? 'tmpl_${level}_${comp.nodeName}_focus' : 'tmpl_${level}_${comp.nodeName}_blur'`\n    delete attrs.focus\n    return `\n<template name=\"tmpl_${level}_${comp.nodeName}\">\n  <template is=\"{{${templateName}}}\" data=\"{{${this.dataKeymap('i:i')}}}\" />\n</template>\n\n<template name=\"tmpl_${level}_${comp.nodeName}_focus\">\n  <${comp.nodeName} ${this.buildAttribute(comp.attributes, comp.nodeName)} id=\"{{i.uid}}\" />\n</template>\n\n<template name=\"tmpl_${level}_${comp.nodeName}_blur\">\n  <${comp.nodeName} ${this.buildAttribute(attrs, comp.nodeName)} id=\"{{i.uid}}\" />\n</template>\n`\n  }\n\n  protected buildStandardComponentTemplate (comp: Component, level: number) {\n    const { isSupportRecursive, Adapter } = this\n    const nextLevel = isSupportRecursive ? 0 : level + 1\n\n    const data = !this.isSupportRecursive && this.supportXS\n      ? `${this.dataKeymap('i:item,l:l')}`\n      : this.dataKeymap('i:item')\n\n    let child = this.supportXS\n      ? `<template is=\"{{xs.e(${isSupportRecursive ? 0 : 'cid+1'})}}\" data=\"{{${data}}}\" />`\n      : `<template is=\"tmpl_${nextLevel}_${Shortcuts.Container}\" data=\"{{${data}}}\" />`\n\n    if (isFunction(this.modifyLoopBody)) {\n      child = this.modifyLoopBody(child, comp.nodeName)\n    }\n\n    let children = this.voidElements.has(comp.nodeName)\n      ? ''\n      : `\n    <block ${Adapter.for}=\"{{i.${Shortcuts.Childnodes}}}\" ${Adapter.key}=\"uid\">\n      ${child}\n    </block>\n  `\n\n    if (isFunction(this.modifyLoopContainer)) {\n      children = this.modifyLoopContainer(children, comp.nodeName)\n    }\n\n    let nodeName = ''\n    switch (comp.nodeName) {\n      case 'slot':\n      case 'slot-view':\n      case 'catch-view':\n      case 'static-view':\n      case 'pure-view':\n        nodeName = 'view'\n        break\n      case 'static-text':\n        nodeName = 'text'\n        break\n      case 'static-image':\n        nodeName = 'image'\n        break\n      default:\n        nodeName = comp.nodeName\n        break\n    }\n\n    let res = `\n<template name=\"tmpl_${level}_${comp.nodeName}\">\n  <${nodeName} ${this.buildAttribute(comp.attributes, comp.nodeName)} id=\"{{i.uid}}\">${children}</${nodeName}>\n</template>\n`\n\n    if (isFunction(this.modifyTemplateResult)) {\n      res = this.modifyTemplateResult(res, comp.nodeName, level, children)\n    }\n\n    return res\n  }\n\n  protected buildPlainTextTemplate (level: number): string {\n    return `\n<template name=\"tmpl_${level}_#text\" data=\"{{${this.dataKeymap('i:i')}}}\">\n  <block>{{i.${Shortcuts.Text}}}</block>\n</template>\n`\n  }\n\n  protected buildThirdPartyTemplate (level: number, componentConfig: ComponentConfig) {\n    const { Adapter, isSupportRecursive, supportXS, nestElements } = this\n    const nextLevel = isSupportRecursive ? 0 : level + 1\n    let template = ''\n\n    const data = !isSupportRecursive && supportXS\n      ? `${this.dataKeymap('i:item,l:l')}`\n      : this.dataKeymap('i:item')\n\n    componentConfig.thirdPartyComponents.forEach((attrs, compName) => {\n      if (compName === 'custom-wrapper') {\n        template += `\n<template name=\"tmpl_${level}_${compName}\">\n  <${compName} i=\"{{i}}\" l=\"{{l}}\" id=\"{{i.uid}}\">\n  </${compName}>\n</template>\n  `\n      } else {\n        if (!isSupportRecursive && supportXS && nestElements.has(compName) && level + 1 > nestElements.get(compName)!) return\n\n        const child = supportXS\n          ? `<template is=\"{{xs.e(${isSupportRecursive ? 0 : 'cid+1'})}}\" data=\"{{${data}}}\" />`\n          : `<template is=\"tmpl_${nextLevel}_${Shortcuts.Container}\" data=\"{{${data}}}\" />`\n\n        template += `\n<template name=\"tmpl_${level}_${compName}\">\n  <${compName} ${this.buildThirdPartyAttr(attrs)} id=\"{{i.uid}}\">\n    <block ${Adapter.for}=\"{{i.${Shortcuts.Childnodes}}}\" ${Adapter.key}=\"uid\">\n      ${child}\n    </block>\n  </${compName}>\n</template>\n  `\n      }\n    })\n\n    return template\n  }\n\n  protected buildContainerTemplate (level: number, restart = false) {\n    let tmpl = ''\n    if (restart) {\n      tmpl = `<block ${this.Adapter.if}=\"{{i.nn === '#text'}}\">\n    <template is=\"tmpl_0_#text\" data=\"{{i:i}}\" />\n  </block>\n  <block ${this.Adapter.else}>\n    ${!this.isSupportRecursive && this.supportXS ? '<comp i=\"{{i}}\" l=\"{{l}}\" />' : '<comp i=\"{{i}}\" />'}\n  </block>`\n    } else {\n      const xs = !this.isSupportRecursive\n        ? `xs.a(${level}, i.${Shortcuts.NodeName}, l)`\n        : `xs.a(${level}, i.${Shortcuts.NodeName})`\n\n      const data = !this.isSupportRecursive\n        ? `${this.dataKeymap(`i:i,cid:${level},l:xs.f(l,i.${Shortcuts.NodeName})`)}`\n        : `${this.dataKeymap('i:i')}`\n\n      tmpl = this.supportXS\n        ? `<template is=\"{{${xs}}}\" data=\"{{${data}}}\" />`\n        : `<template is=\"{{'tmpl_${level}_' + i.${Shortcuts.NodeName}}}\" data=\"{{${this.dataKeymap('i:i')}}}\" />`\n    }\n    return `\n<template name=\"tmpl_${level}_${Shortcuts.Container}\">\n  ${tmpl}\n</template>\n`\n  }\n\n  protected dataKeymap (keymap: string) {\n    return keymap\n  }\n\n  protected getEvents (): any {\n    return events\n  }\n\n  protected getAttrValue (value: string, _key: string, _nodeName: string) {\n    return `{${value}}`\n  }\n\n  protected buildXsTemplate () {\n    return ''\n  }\n\n  public buildPageTemplate = (baseTempPath: string) => {\n    const template = `<import src=\"${baseTempPath}\"/>\n<template is=\"taro_tmpl\" data=\"{{${this.dataKeymap('root:root')}}}\" />`\n\n    return template\n  }\n\n  public buildBaseComponentTemplate = (ext: string) => {\n    const data = !this.isSupportRecursive && this.supportXS\n      ? this.dataKeymap('i:i,l:l')\n      : this.dataKeymap('i:i')\n\n    return `<import src=\"./base${ext}\" />\n<template is=\"tmpl_0_${Shortcuts.Container}\" data=\"{{${data}}}\" />`\n  }\n\n  public buildCustomComponentTemplate = (ext: string) => {\n    const Adapter = this.Adapter\n    const data = !this.isSupportRecursive && this.supportXS\n      ? `${this.dataKeymap('i:item,l:\\'\\'')}`\n      : this.dataKeymap('i:item')\n    return `<import src=\"./base${ext}\" />\n  <block ${Adapter.for}=\"{{i.${Shortcuts.Childnodes}}}\" ${Adapter.key}=\"uid\">\n    <template is=\"tmpl_0_container\" data=\"{{${data}}}\" />\n  </block>`\n  }\n\n  public buildXScript = () => {\n    return `${this.exportExpr} {\n  a: ${this.buildXSTmplName()},\n  b: function (a, b) {\n    return a === undefined ? b : a\n  },\n  c: function(i, prefix) {\n    var s = i.focus !== undefined ? 'focus' : 'blur'\n    return prefix + i.${Shortcuts.NodeName} + '_' + s\n  },\n  d: function (i, v) {\n    return i === undefined ? v : i\n  },\n  e: function (n) {\n    return 'tmpl_' + n + '_${Shortcuts.Container}'\n  },\n  ${this.buildXSTmpExtra()}\n}`\n  }\n\n  public mergeComponents (ctx, patch: Record<string, Record<string, string>>) {\n    ctx.helper.recursiveMerge(this.internalComponents, patch)\n  }\n\n  protected buildXSTmplName () {\n    return `function (l, n) {\n    return 'tmpl_' + l + '_' + n\n  }`\n  }\n\n  protected buildXSTmpExtra () {\n    return ''\n  }\n}\n\nexport class RecursiveTemplate extends BaseTemplate {\n  isSupportRecursive = true\n\n  public buildTemplate = (componentConfig: ComponentConfig) => {\n    let template = this.buildBaseTemplate()\n    if (!this.miniComponents) {\n      this.miniComponents = this.createMiniComponents(this.internalComponents)\n    }\n    const ZERO_FLOOR = 0\n    const components = Object.keys(this.miniComponents)\n      .filter(c => componentConfig.includes.size && !componentConfig.includeAll ? componentConfig.includes.has(c) : true)\n\n    template = components.reduce((current, nodeName) => {\n      const attributes: Attributes = this.miniComponents[nodeName]\n      return current + this.buildComponentTemplate({ nodeName, attributes }, ZERO_FLOOR)\n    }, template)\n\n    template += this.buildPlainTextTemplate(ZERO_FLOOR)\n    template += this.buildThirdPartyTemplate(ZERO_FLOOR, componentConfig)\n    template += this.buildContainerTemplate(ZERO_FLOOR)\n\n    return template\n  }\n}\n\nexport class UnRecursiveTemplate extends BaseTemplate {\n  isSupportRecursive = false\n  private _baseLevel = 16\n  private componentConfig: ComponentConfig\n\n  set baseLevel (lv) {\n    this._baseLevel = lv\n  }\n\n  get baseLevel () {\n    return this._baseLevel\n  }\n\n  public buildTemplate = (componentConfig: ComponentConfig) => {\n    this.componentConfig = componentConfig\n    if (!this.miniComponents) {\n      this.miniComponents = this.createMiniComponents(this.internalComponents)\n    }\n    const components = Object.keys(this.miniComponents)\n      .filter(c => componentConfig.includes.size && !componentConfig.includeAll ? componentConfig.includes.has(c) : true)\n\n    let template = this.buildBaseTemplate()\n    for (let i = 0; i < this.baseLevel; i++) {\n      template += this.supportXS\n        ? this.buildOptimizeFloor(i, components, this.baseLevel === i + 1)\n        : this.buildFloor(i, components, this.baseLevel === i + 1)\n    }\n\n    return template\n  }\n\n  protected buildFloor (level: number, components: string[], restart = false) {\n    if (restart) return this.buildContainerTemplate(level, restart)\n\n    let template = components.reduce((current, nodeName) => {\n      const attributes: Attributes = this.miniComponents[nodeName]\n      return current + this.buildComponentTemplate({ nodeName, attributes }, level)\n    }, '')\n\n    template += this.buildPlainTextTemplate(level)\n    template += this.buildThirdPartyTemplate(level, this.componentConfig)\n    template += this.buildContainerTemplate(level, restart)\n\n    return template\n  }\n\n  protected buildOptimizeFloor (level: number, components: string[], restart = false) {\n    if (restart) return this.buildContainerTemplate(level, restart)\n\n    let template = components.reduce((current, nodeName) => {\n      if (level !== 0) {\n        if (!this.nestElements.has(nodeName)) {\n          // 不可嵌套自身的组件只需输出一层模板\n          return current\n        } else {\n          // 部分可嵌套自身的组件实际上不会嵌套过深，这里按阈值限制层数\n          const max = this.nestElements.get(nodeName)!\n          if (max > 0 && level >= max) {\n            return current\n          }\n        }\n      }\n      const attributes: Attributes = this.miniComponents[nodeName]\n      return current + this.buildComponentTemplate({ nodeName, attributes }, level)\n    }, '')\n\n    if (level === 0) template += this.buildPlainTextTemplate(level)\n    template += this.buildThirdPartyTemplate(level, this.componentConfig)\n    template += this.buildContainerTemplate(level)\n\n    return template\n  }\n\n  protected buildXSTmplName () {\n    const isLoopComps = [\n      ...Array.from(this.nestElements.keys()),\n      ...Array.from(this.componentConfig.thirdPartyComponents.keys())\n    ]\n    const isLoopCompsSet = new Set(isLoopComps)\n    const hasMaxComps: string[] = []\n    this.nestElements.forEach((max, comp) => {\n      if (max > 1) {\n        hasMaxComps.push(comp)\n      } else if (max === 1 && isLoopCompsSet.has(comp)) {\n        isLoopCompsSet.delete(comp)\n      }\n    })\n    return `function (l, n, s) {\n    var a = ${JSON.stringify(Array.from(isLoopCompsSet))}\n    var b = ${JSON.stringify(hasMaxComps)}\n    if (a.indexOf(n) === -1) {\n      l = 0\n    }\n    if (b.indexOf(n) > -1) {\n      var u = s.split(',')\n      var depth = 0\n      for (var i = 0; i < u.length; i++) {\n        if (u[i] === n) depth++\n      }\n      l = depth\n    }\n    return 'tmpl_' + l + '_' + n\n  }`\n  }\n\n  protected buildXSTmpExtra () {\n    const hasMaxComps: string[] = []\n    this.nestElements.forEach((max, comp) => {\n      if (max > 1) hasMaxComps.push(comp)\n    })\n    return `f: function (l, n) {\n    var b = ${JSON.stringify(hasMaxComps)}\n    if (b.indexOf(n) > -1) {\n      if (l) l += ','\n      l += n\n    }\n    return l\n  }`\n  }\n}\n","import { unsupport, setUniqueKeyToRoute } from './utils'\n\ndeclare const getCurrentPages: () => any\ndeclare const getApp: () => any\ndeclare const requirePlugin: () => void\n\ntype IObject = Record<string, any>\n\ninterface IProcessApisIOptions {\n  noPromiseApis?: Set<string>\n  needPromiseApis?: Set<string>\n  handleSyncApis?: (key: string, global: IObject, args: any[]) => any\n  transformMeta?: (key: string, options: IObject) => { key: string, options: IObject },\n  modifyAsyncResult?: (key: string, res) => void\n  isOnlyPromisify?: boolean\n  [propName: string]: any\n}\n\nconst noPromiseApis = new Set<string>([\n  'clearStorageSync',\n  'getBatteryInfoSync',\n  'getExtConfigSync',\n  'getFileSystemManager',\n  'getLaunchOptionsSync',\n  'getStorageInfoSync',\n  'getStorageSync',\n  'getSystemInfoSync',\n  'offAccelerometerChange',\n  'offAppHide',\n  'offAppShow',\n  'offAudioInterruptionBegin',\n  'offAudioInterruptionEnd',\n  'offBLECharacteristicValueChange',\n  'offBLEConnectionStateChange',\n  'offBluetoothAdapterStateChange',\n  'offBluetoothDeviceFound',\n  'offCompassChange',\n  'offError',\n  'offGetWifiList',\n  'offGyroscopeChange',\n  'offMemoryWarning',\n  'offNetworkStatusChange',\n  'offPageNotFound',\n  'offUnhandledRejection',\n  'offUserCaptureScreen',\n  'onAccelerometerChange',\n  'onAppHide',\n  'onAppShow',\n  'onAudioInterruptionBegin',\n  'onAudioInterruptionEnd',\n  'onBLECharacteristicValueChange',\n  'onBLEConnectionStateChange',\n  'onBeaconServiceChange',\n  'onBeaconUpdate',\n  'onBluetoothAdapterStateChange',\n  'onBluetoothDeviceFound',\n  'onCompassChange',\n  'onDeviceMotionChange',\n  'onError',\n  'onGetWifiList',\n  'onGyroscopeChange',\n  'onMemoryWarning',\n  'onNetworkStatusChange',\n  'onPageNotFound',\n  'onSocketClose',\n  'onSocketError',\n  'onSocketMessage',\n  'onSocketOpen',\n  'onUnhandledRejection',\n  'onUserCaptureScreen',\n  'removeStorageSync',\n  'reportAnalytics',\n  'setStorageSync',\n  'arrayBufferToBase64',\n  'base64ToArrayBuffer',\n  'canIUse',\n  'createAnimation',\n  'createCameraContext',\n  'createCanvasContext',\n  'createInnerAudioContext',\n  'createIntersectionObserver',\n  'createInterstitialAd',\n  'createLivePlayerContext',\n  'createMapContext',\n  'createSelectorQuery',\n  'createVideoContext',\n  'getBackgroundAudioManager',\n  'getMenuButtonBoundingClientRect',\n  'getRecorderManager',\n  'getUpdateManager'\n])\n\nconst needPromiseApis = new Set<string>([\n  'addPhoneContact',\n  'authorize',\n  'canvasGetImageData',\n  'canvasPutImageData',\n  'canvasToTempFilePath',\n  'checkSession',\n  'chooseAddress',\n  'chooseImage',\n  'chooseInvoiceTitle',\n  'chooseLocation',\n  'chooseVideo',\n  'clearStorage',\n  'closeBLEConnection',\n  'closeBluetoothAdapter',\n  'closeSocket',\n  'compressImage',\n  'connectSocket',\n  'createBLEConnection',\n  'downloadFile',\n  'getAvailableAudioSources',\n  'getBLEDeviceCharacteristics',\n  'getBLEDeviceServices',\n  'getBatteryInfo',\n  'getBeacons',\n  'getBluetoothAdapterState',\n  'getBluetoothDevices',\n  'getClipboardData',\n  'getConnectedBluetoothDevices',\n  'getConnectedWifi',\n  'getExtConfig',\n  'getFileInfo',\n  'getImageInfo',\n  'getLocation',\n  'getNetworkType',\n  'getSavedFileInfo',\n  'getSavedFileList',\n  'getScreenBrightness',\n  'getSetting',\n  'getStorage',\n  'getStorageInfo',\n  'getSystemInfo',\n  'getUserInfo',\n  'getWifiList',\n  'hideHomeButton',\n  'hideShareMenu',\n  'hideTabBar',\n  'hideTabBarRedDot',\n  'loadFontFace',\n  'login',\n  'makePhoneCall',\n  'navigateBack',\n  'navigateBackMiniProgram',\n  'navigateTo',\n  'navigateToBookshelf',\n  'navigateToMiniProgram',\n  'notifyBLECharacteristicValueChange',\n  'hideKeyboard',\n  'hideLoading',\n  'hideNavigationBarLoading',\n  'hideToast',\n  'openBluetoothAdapter',\n  'openDocument',\n  'openLocation',\n  'openSetting',\n  'pageScrollTo',\n  'previewImage',\n  'queryBookshelf',\n  'reLaunch',\n  'readBLECharacteristicValue',\n  'redirectTo',\n  'removeSavedFile',\n  'removeStorage',\n  'removeTabBarBadge',\n  'requestSubscribeMessage',\n  'saveFile',\n  'saveImageToPhotosAlbum',\n  'saveVideoToPhotosAlbum',\n  'scanCode',\n  'sendSocketMessage',\n  'setBackgroundColor',\n  'setBackgroundTextStyle',\n  'setClipboardData',\n  'setEnableDebug',\n  'setInnerAudioOption',\n  'setKeepScreenOn',\n  'setNavigationBarColor',\n  'setNavigationBarTitle',\n  'setScreenBrightness',\n  'setStorage',\n  'setTabBarBadge',\n  'setTabBarItem',\n  'setTabBarStyle',\n  'showActionSheet',\n  'showFavoriteGuide',\n  'showLoading',\n  'showModal',\n  'showShareMenu',\n  'showTabBar',\n  'showTabBarRedDot',\n  'showToast',\n  'startBeaconDiscovery',\n  'startBluetoothDevicesDiscovery',\n  'startDeviceMotionListening',\n  'startPullDownRefresh',\n  'stopBeaconDiscovery',\n  'stopBluetoothDevicesDiscovery',\n  'stopCompass',\n  'startCompass',\n  'startAccelerometer',\n  'stopAccelerometer',\n  'showNavigationBarLoading',\n  'stopDeviceMotionListening',\n  'stopPullDownRefresh',\n  'switchTab',\n  'uploadFile',\n  'vibrateLong',\n  'vibrateShort',\n  'writeBLECharacteristicValue'\n])\n\nfunction getCanIUseWebp (taro) {\n  return function () {\n    if (typeof taro.getSystemInfoSync !== 'function') {\n      console.error('不支持 API canIUseWebp')\n      return false\n    }\n    const { platform } = taro.getSystemInfoSync()\n    const platformLower = platform.toLowerCase()\n    if (platformLower === 'android' || platformLower === 'devtools') {\n      return true\n    }\n    return false\n  }\n}\n\nfunction getNormalRequest (global) {\n  return function request (options) {\n    options = options || {}\n    if (typeof options === 'string') {\n      options = {\n        url: options\n      }\n    }\n    const originSuccess = options.success\n    const originFail = options.fail\n    const originComplete = options.complete\n    let requestTask\n    const p: any = new Promise((resolve, reject) => {\n      options.success = res => {\n        originSuccess && originSuccess(res)\n        resolve(res)\n      }\n      options.fail = res => {\n        originFail && originFail(res)\n        reject(res)\n      }\n\n      options.complete = res => {\n        originComplete && originComplete(res)\n      }\n\n      requestTask = global.request(options)\n    })\n    p.abort = (cb) => {\n      cb && cb()\n      if (requestTask) {\n        requestTask.abort()\n      }\n      return p\n    }\n    return p\n  }\n}\n\nfunction processApis (taro, global, config: IProcessApisIOptions = {}) {\n  const patchNoPromiseApis = config.noPromiseApis || []\n  const patchNeedPromiseApis = config.needPromiseApis || []\n  const _noPromiseApis = new Set<string>([...patchNoPromiseApis, ...noPromiseApis])\n  const _needPromiseApis = new Set<string>([...patchNeedPromiseApis, ...needPromiseApis])\n  const apis = [..._noPromiseApis, ..._needPromiseApis]\n\n  apis.forEach(key => {\n    if (_needPromiseApis.has(key)) {\n      const originKey = key\n      taro[originKey] = (options: Record<string, any> | string = {}, ...args) => {\n        let key = originKey\n\n        // 第一个参数 options 为字符串，单独处理\n        if (typeof options === 'string') {\n          if (args.length) {\n            return global[key](options, ...args)\n          }\n          return global[key](options)\n        }\n\n        // 改变 key 或 option 字段，如需要把支付宝标准的字段对齐微信标准的字段\n        if (config.transformMeta) {\n          const transformResult = config.transformMeta(key, options)\n          key = transformResult.key\n          ;(options as Record<string, any>) = transformResult.options\n          // 新 key 可能不存在\n          if (!global.hasOwnProperty(key)) {\n            return unsupport(key)()\n          }\n        }\n\n        let task: any = null\n        const obj: Record<string, any> = Object.assign({}, options)\n\n        // 为页面跳转相关的 API 设置一个随机数作为路由参数。为了给 runtime 区分页面。\n        setUniqueKeyToRoute(key, options)\n\n        // Promise 化\n        const p: any = new Promise((resolve, reject) => {\n          obj.success = res => {\n            config.modifyAsyncResult?.(key, res)\n            options.success?.(res)\n            if (key === 'connectSocket') {\n              resolve(\n                Promise.resolve().then(() => Object.assign(task, res))\n              )\n            } else {\n              resolve(res)\n            }\n          }\n          obj.fail = res => {\n            options.fail?.(res)\n            reject(res)\n          }\n          obj.complete = res => {\n            options.complete?.(res)\n          }\n          if (args.length) {\n            task = global[key](obj, ...args)\n          } else {\n            task = global[key](obj)\n          }\n        })\n\n        // 给 promise 对象挂载属性\n        if (key === 'uploadFile' || key === 'downloadFile') {\n          p.progress = cb => {\n            task?.onProgressUpdate(cb)\n            return p\n          }\n          p.abort = cb => {\n            cb?.()\n            task?.abort()\n            return p\n          }\n        }\n        return p\n      }\n    } else {\n      // API 不存在\n      if (!global.hasOwnProperty(key)) {\n        taro[key] = unsupport(key)\n        return\n      }\n      taro[key] = (...args) => {\n        if (config.handleSyncApis) {\n          return config.handleSyncApis(key, global, args)\n        } else {\n          return global[key].apply(global, args)\n        }\n      }\n    }\n  })\n\n  !config.isOnlyPromisify && equipCommonApis(taro, global, config)\n}\n\n/**\n * 挂载常用 API\n * @param taro Taro 对象\n * @param global 小程序全局对象，如微信的 wx，支付宝的 my\n */\nfunction equipCommonApis (taro, global, apis: Record<string, any> = {}) {\n  taro.canIUseWebp = getCanIUseWebp(taro)\n  taro.getCurrentPages = getCurrentPages || unsupport('getCurrentPages')\n  taro.getApp = getApp || unsupport('getApp')\n  taro.env = global.env || {}\n\n  try {\n    taro.requirePlugin = requirePlugin || unsupport('requirePlugin')\n  } catch (error) {\n    taro.requirePlugin = unsupport('requirePlugin')\n  }\n\n  // request & interceptors\n  const request = apis.request ? apis.request : getNormalRequest(global)\n  function taroInterceptor (chain) {\n    return request(chain.requestParams)\n  }\n  const link = new taro.Link(taroInterceptor)\n  taro.request = link.request.bind(link)\n  taro.addInterceptor = link.addInterceptor.bind(link)\n  taro.cleanInterceptors = link.cleanInterceptors.bind(link)\n  taro.miniGlobal = global\n}\n\nexport {\n  processApis\n}\n"],"names":[],"mappings":"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"}